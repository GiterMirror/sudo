<HTML>
<HEAD>
<TITLE>Visudo Manual</TITLE>
<LINK REV="made" HREF="mailto:root@localhost">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#OPTIONS">OPTIONS</A>
	<LI><A HREF="#ERRORS">ERRORS</A>
	<LI><A HREF="#ENVIRONMENT">ENVIRONMENT</A>
	<LI><A HREF="#FILES">FILES</A>
	<LI><A HREF="#AUTHOR">AUTHOR</A>
	<LI><A HREF="#BUGS">BUGS</A>
	<LI><A HREF="#DISCLAIMER">DISCLAIMER</A>
	<LI><A HREF="#CAVEATS">CAVEATS</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<HR>
<H1><A NAME="NAME">NAME</A></H1>
<P>
visudo - edit the sudoers file

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<STRONG>visudo</STRONG> [ <STRONG>-s</STRONG> ] [ <STRONG>-V</STRONG> ]

<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
<STRONG>visudo</STRONG> edits the <EM>sudoers</EM> file in a safe fashion, analogous to <CODE>vipw(8).</CODE>  <STRONG>visudo</STRONG> locks the <EM>sudoers</EM> file against multiple simultaneous edits, provides basic sanity checks, and
checks for parse errors. If the <EM>sudoers</EM> file is currently being edited you will receive a message to try again
later. In the default configuration, the <CODE>vi(1)</CODE> editor is used,
but there is a compile time option to allow use of whatever editor the
environment variables <CODE>EDITOR</CODE> or <CODE>VISUAL</CODE> are set to.

<P>
<STRONG>visudo</STRONG> parses the <EM>sudoers</EM> file after the edit and will not save the changes if there is a syntax
error. Upon finding an error, a message will be printed stating the line
<CODE>number(s)</CODE> that the error occurred on and the user will receive
the ``What now?'' prompt. At this point the user may enter ``e'' to re-edit
the <EM>sudoers</EM> file, enter ``x'' to exit without saving the changes, or ``Q'' to quit and
save changes. The ``Q'' option should be used with extreme care because if <STRONG>visudo</STRONG>
believes there to be a parse error, so will <STRONG>sudo</STRONG> and no one will be able to execute <STRONG>sudo</STRONG> again until the error is fixed. Any other command at this prompt will print
a short help message. When editing the <EM>sudoers</EM> file after a parse error has been detected the cursor will be placed on the
line where the error occurred (if the editor supports this feature).

<P>
<HR>
<H1><A NAME="OPTIONS">OPTIONS</A></H1>
<P>
<STRONG>visudo</STRONG> accepts the following command line option:

<DL>
<DT><STRONG><A NAME="item__s">-s</A></STRONG><DD>
<P>
Enable <STRONG>strict</STRONG> checking of the <EM>sudoers</EM> file. If an alias is used before it is defined, <STRONG>visudo</STRONG> will consider this a parse error. Note that it is not possible to
differentiate between an alias and a hostname or username that consists
solely of upper case letters, digits, and the underscore ('_') character.

<DT><STRONG><A NAME="item__V">-V</A></STRONG><DD>
<P>
The <CODE>-V</CODE> (version) option causes <STRONG>visudo</STRONG> to print the version number and exit.

</DL>
<P>
<HR>
<H1><A NAME="ERRORS">ERRORS</A></H1>
<DL>
<DT><STRONG><A NAME="item_sudoers">sudoers file busy, try again later.</A></STRONG><DD>
<P>
Someone else is currently editing the <EM>sudoers</EM> file.

<DT><STRONG><A NAME="item__etc_sudoers_tmp_">/etc/sudoers.tmp: Permission denied</A></STRONG><DD>
<P>
You didn't run <STRONG>visudo</STRONG> as root.

<DT><STRONG><A NAME="item_Can">Can't find you in the passwd database</A></STRONG><DD>
<P>
Your userid does not appear in the system passwd file.

<DT><STRONG><A NAME="item_Warning">Warning: undeclared Alias referenced near ...</A></STRONG><DD>
<P>
Either you are using a {User,Runas,Host,Cmnd}_Alias before defining it or
you have a user or hostname listed that consists solely of upper case
letters, digits, and the underscore ('_') character. If the latter, you can
ignore the warnings (<STRONG>sudo</STRONG> will not complain). In <STRONG>-s</STRONG> (strict) mode these are errors not warnings.

<H1><A NAME="ENVIRONMENT">ENVIRONMENT</A></H1>
<P>
The following environment variables are used only if <STRONG>visudo</STRONG>
was configured with the <EM>--with-env-editor</EM> option:

<P>
<PRE> EDITOR                 Used by visudo as the editor to use
 VISUAL                 Used by visudo if EDITOR is not set
</PRE>
<H1><A NAME="FILES">FILES</A></H1>
<P>
<PRE> /etc/sudoers           List of who can run what
 /etc/sudoers.tmp       Lock file for visudo
</PRE>
<H1><A NAME="AUTHOR">AUTHOR</A></H1>
<P>
Many people have worked on <EM>sudo</EM> over the years, this version of
<STRONG>visudo</STRONG> was written by:

<P>
<PRE> Todd Miller            &lt;Todd.Miller@courtesan.com&gt;
</PRE>
<P>
See the HISTORY file in the sudo distribution for more details.

<H1><A NAME="BUGS">BUGS</A></H1>
<P>
If you feel you have found a bug in sudo, please submit a bug report at <A
HREF="http://www.courtesan.com/sudo/bugs/.">http://www.courtesan.com/sudo/bugs/.</A>


<H1><A NAME="DISCLAIMER">DISCLAIMER</A></H1>
<P>
<STRONG>Visudo</STRONG> is provided ``AS IS'' and any express or implied warranties, including, but
not limited to, the implied warranties of merchantability and fitness for a
particular purpose are disclaimed. See the LICENSE file distributed with <STRONG>sudo</STRONG> for complete details.

<H1><A NAME="CAVEATS">CAVEATS</A></H1>
<P>
There is no easy way to prevent a user from gaining a root shell if the
editor used by <STRONG>visudo</STRONG> allows shell escapes.

<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<CODE><A HREF="sudo.html">sudo(8)</A>, <CODE>vipw(8).</CODE>
</DL>
</BODY>

</HTML>
